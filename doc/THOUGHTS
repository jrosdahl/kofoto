Attributes:

    For both albums and images:

    * keyword (multivalue): A keyword for the image/album.
    * longdesc: Image/album text, 0 to many rows, not suitable for
      link text.
    * shortdesc: Short description, suitable for link text.

    For images only:

    * aperture: Aperture (could be fetched from EXIF attribute
      FNumber).
    * exposure-time: Exposure time (could be fetched from EXIF
      attribute ExposureTime).
    * flash: Whether flash was fired (could be fetched from EXIF
      attribute Flash).
    * height: Image height (could be fetched from EXIF attribute
      ExifImageHeight).
    * make: Camera vendor (?) (ex: Canon).
    * model: Camera model (ex: Canon DIGITAL IXUS).
    * orientation: Image orientation in degrees (0, 90, 180 or 270).
    * photographer: Photographer.
    * width: Image width (could be fetched from EXIF attribute
      ExifImageWidth).

Key features (why we can't use J. Random Photo Album software):

    * Command-line interface available.
    * Generation of static HTML pages that can be burned to a CD-ROM
      and viewed with an ordinary web browser with no special demands
      on the browser.
    * The album tree is separate from where the images are stored.
    * Original image files are never modified.
    * The meta data may be stored in a human-readable, future-proof
      way.
    * One and the same image can be included in several albums. And
      likewise for albums.
    * "Magical" albums, e.g. one listing images that aren't included
      in any album, and one listing images sorted after timestamp.
    * (Overridable attributes depending on the location of the
      album/image.) -- would be nice...

Meta data:

    Meta data is stored in a BerkeleyDB database environment, whose
    default location is ~/.kofoto/shelf. The shelf records information
    about registered images and albums. Information is e.g. attributes
    (as listed above) and the image list for an album.

Configuration:

    Configuration not specific to a shelf is stored in
    ~/.kofoto/config.

Database location:

    The default database file is ~/.kofoto/shelf.db.

Database schema:

    See shelf.py.

Special albums:

    root - The root album.
    _allalbums - An album with all (normal) albums as children.

Design requirements and goals:

    * It should be very hard to lose any information.

      - Original image files (downloaded from the camera) are never
        changed (by Kofoto).
      - Meta information can be exported to a future-safe format.
      - Original image files can be renamed/moved without loss of meta
        information.

    * It should be possible to uniquely identify images.

      - A checksum of (parts of) an image is used as identifier.

    * It should be possible to uniquely identify albums.

      - Each album has a unique human-recognizable tag.

    * Albums should contain an ordered list of albums and images.

      - Albums contain an ordered list of albums and images.

    * The same album/image should be able to be a part of several
      different albums.

      - The same album/image can be a part of several different
        albums without duplication of information.

    * It should be possible to view the albums without a specialized program.

      - Standard HTML pages that can be viewed with an ordinary web
        browser are generated.

    * It should be possible to view the album from read-only media.

      - A set of static HTML pages and images are pregenerated (i.e.
        not per view).

    * It should be possible to add meta information and new kinds of
      meta information.

      - It is possible to associate arbitrary attributes with images
        and albums.

    * It should be possible to store information about image
      orientation, gamma value and other parameters that may affect
      generated images.

      - Stored as image attributes.

Magic albums that would be nice to have:

    * Hierarchy of locations.

      Images can have the attribute "location" set to a list of
      locations that represent increasingly specific physical places.
      Example: Image1 with location set to "Sweden:Linköping:Lambohov"
      and Image2 with location set to "Sweden:Linköping:Ryd" would
      render an album graph like this:

          [A] Locations
              [A] Sweden
                  [A] Linköping
                      [A] Lambohov
                          [I] Image1
                      [A] Ryd
                          [I] Image2

    * Chronological with day granularity.

          [A] Chronological
              [A] 2003
                  [A] March 2003
                      [A] 17 March 2003
                          [I] Image1
                      [A] 19 March 2003
                          [I] Image2

======================================================================

originalbildfiler ändras aldrig

albumtexter

bildtexter

exportera brännbara statiska album

angivande av orientering

översiktsvy med tumnaglar

lätt att göra metadata beständigt

unika IDn

album som innehåller en ordnad sekvens av bilder

nyckelordsmärkning

sökning på nyckelord och annat

viss dynamik när man tittar på webbsidor: lägga till kommentarer

åtkomstkontroll

album kan innehålla album och bilder

en bild kan ingå i ett godtyckligt antal album

ett album kan ingå i ett godtyckligt antal album

hantera andra filtyper, t ex videosnuttar och ljud


designbeslut:

Bild-ID bestäms av originalbildens MD5-summa.

Album-ID är en alfaumerisk sträng av godtycklig längd som inte får
innehålla "/". Tills vidare används ett automatiskt löpnummer.

En specificerad uppsättning bildattribut finns. Vissa av dessa kan
hämtas ur bildens EXIF-information, och kofoto ska veta vilka taggar
som ska lagras i vilka attribut.

För import av "nya" EXIF-data ska EXIF-taggen specificeras så att
kofoto-attribut inte av misstag skrivs över.

Såväl bilder som bildreferenser kan ha attribut, och dessa kommer ur
samma mängd.

Då en bild (eller ett album) länkas till ett nytt ställe kan "länk-"
eller "kortnamn" anges. Görs inte detta får länken inget namn, och
källans "kortnamn" används vid visuell representation.

Originalbilder kan (om)organiseras godtyckligt i filsystemet.

Metainformation lagras i enn XML-fil, "databasen".

Album genereras statiskt.

Annoteringar och kommentarer via webbgränssnittet lagras i en speciell
fil.  Denna information kan sammanfogas med databasen när så önskas.

Ha ett välspecat gränssnitt mellan fram- och bakända?

Importera EXIF-informationen till databasen.  Läs alltså aldrig
metainformation från originalbilden (förutom vid importering, Björn
anm.).


Speciella attribut:

Time stamp
Short name

Ospeciella attribut:

Caption: Bildtext, 0 till många rader, olämplig som länktext.
